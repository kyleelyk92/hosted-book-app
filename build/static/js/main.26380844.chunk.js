(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),s=a.n(o),c=a(3),i=a(4),l=a(6),u=a(5),h=a(7),b=a(17);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:f},v=function(){return fetch("".concat(m,"/books"),{headers:k}).then((function(e){return e.json()})).then((function(e){return e.books}))},y=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:p({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},E=function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:p({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},g=(a(26),a(8)),O=a(20),j=a(9),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).bookShelfChange=function(e,t){t.shelf="".concat(e),y(t,e).then((function(){return a.props.updateLibrary()}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.shelfClass,n=t.book,o=t.shelf;return r.a.createElement("div",{id:"".concat(n.title).concat(n.pageCount),className:"book-shelf-changer ".concat(a)},r.a.createElement("select",{defaultValue:o,onChange:function(t){return e.bookShelfChange(t.target.value,n)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))}}]),t}(r.a.Component);function N(e){var t=e.book,a=e.updateLibrary,n=e.shelfClass,o=e.shelf,s=t.imageLinks&&t.imageLinks.thumbnail?t.imageLinks.thumbnail:"http://myweekend.in/img/noImageFound.jpg";switch(o){case"none":n="none";break;case"wantToRead":n="want-to-read";break;case"read":n="read";break;case"currentlyReading":n="currently-reading";break;default:n="none"}var c=t.title?t.title:"No title available";return r.a.createElement("li",{key:Math.random()+t.title},r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:'"book-cover"',style:{width:128,height:188,backgroundImage:'url("'.concat(s,'")')}}),r.a.createElement(L,{shelf:o,shelfClass:n,updateLibrary:a,book:t})),r.a.createElement("div",{className:"book-title"},c),r.a.createElement("div",{className:"book-authors"},t.authors&&t.authors.map((function(e){return r.a.createElement("span",{key:e},e)})))))}var S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",bookSearch:[],error:!1},a.updateSearch=function(e){e.length>0&&E(e).then((function(e){return a.setState({bookSearch:[],error:!1}),e})).then((function(e){e.length>0&&e.forEach((function(e){a.setState((function(t){return{bookSearch:[].concat(Object(O.a)(t.bookSearch),[e]),error:!1}}))}))})).then((function(){0===a.state.bookSearch.length&&a.setState({error:!0})}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.savedBooks;return r.a.createElement("div",null,r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(j.b,{className:"close-search",to:"/"},"Close"),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",onChange:function(t){return e.updateSearch(t.target.value)},placeholder:"Search by title or author"}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},this.state.bookSearch.map((function(a){var n=t.find((function(e){if(e.id===a.id)return e}))||a,o=n.shelf;return r.a.createElement(N,{bookList:e.state.bookSearch,shelfClass:n.shelf,shelf:o||"none",book:n,updateLibrary:e.props.updateLibrary})}))),this.state.error&&r.a.createElement("div",null,"No results found, try a different search term"))))}}]),t}(r.a.Component);function C(e){e.bookSearch,e.bookList;var t=e.destination,a=void 0===t?"null":t,n=e.updateLibrary,o=e.shelfClass,s=e.search,c=e.divName;return r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},c),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},e.bookList.map((function(e){return e.shelf===a?r.a.createElement(N,{book:e,destination:a,updateLibrary:n,shelfClass:o,shelf:e.shelf,search:s}):null}))))))))}var w=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{className:"open-search",to:"/search"},r.a.createElement("button",null,"+")),r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"My Reads"))),r.a.createElement(C,{bookList:this.props.bookList,destination:"currentlyReading",divName:"Currently Reading",updateLibrary:this.props.updateLibrary,shelfClass:"currently-reading",search:!1}),r.a.createElement(C,{bookList:this.props.bookList,destination:"wantToRead",divName:"Want to read",updateLibrary:this.props.updateLibrary,shelfClass:"want-to-read",search:!1}),r.a.createElement(C,{bookList:this.props.bookList,destination:"read",divName:"Read",updateLibrary:this.props.updateLibrary,shelfClass:"read",search:!1}))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={savedBooks:[]},a.updateLibrary=function(){v().then((function(e){return a.setState({savedBooks:e})}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){return e.setState({savedBooks:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{path:"/search",render:function(){return r.a.createElement(S,{savedBooks:e.state.savedBooks,updateLibrary:e.updateLibrary})}}),r.a.createElement(g.a,{path:"/",exact:!0,render:function(){return r.a.createElement(w,{bookList:e.state.savedBooks,updateLibrary:e.updateLibrary})}}))}}]),t}(r.a.Component);a(32);s.a.render(r.a.createElement(j.a,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.26380844.chunk.js.map